---
title: "Intro to R & RStudio: Advanced setup"
author: "UM Bioinformatics Core Workshop Team"
output:
        html_document:
            theme: paper
            toc: true
            toc_depth: 6
            toc_float: true
            number_sections: false
            fig_caption: false
            markdown: GFM
            code_download: false
editor_options: 
  markdown: 
    wrap: 72
---

```{=html}
<style type="text/css">

body, td {
   font-size: 16px;
}
code.r{
  font-size: 12px;
}
pre {
  font-size: 12px
}

</style>
```

```{r klippy, echo=FALSE, include=TRUE}
klippy::klippy(lang = c("r", "markdown", "bash"), position = c("top", "right"))
```

-   The steps below are oriented toward advanced users who would like to
    install and configure select software on their local workstation,
    specifically R/RStudio and dependent libraries. These steps are not
    necessary or recommended, but may provide context for advanced
    use-cases.

-   These instructions build on the install detailed in the [basic setup
    instructions](setup_instructions.html); please see that document for
    more details on setting up Zoom, Slack, and also for getting help.

-   Note that if you do not have Administrative privileges it may be
    difficult to install R/RStudio; you may need to coordinate with your
    System Admin/IT Support team to get these installed.

    -   Skip to [Windows setup](#windows-setup)
    -   Skip to [Macintosh setup](#macintosh-setup)

## Windows setup {#windows-setup}

### Installing R/RStudio (Windows)

1.1. RStudio depends on the R programming environment, so we have to
install that first. In a web browser, open:
[https://cran.rstudio.com/bin/windows/base/](https://cran.rstudio.com/bin/windows/base/){target="_blank"}

1.2 Click **Download R for Windows** (the latest version is fine). Open
the downloaded executable to launch the R installer.

1.3 The installer will walk through several options; accept all the
defaults (by repeatedly clicking <kbd>Next</kbd>) and when prompted, click
<kbd>Install</kbd>. The installer will show a progress bar; the process takes
about 2 minutes; click <kbd>Finish</kbd> when prompted to close the installer.

1.4 To install RStudio: in a web-browser, open:
[https://rstudio.com/products/rstudio/download/#download](https://rstudio.com/products/rstudio/download/#download){target="_blank"}

1.5 Click on **Download RStudio Desktop for Windows**. Open the
downloaded executable to launch the installer. The installer will either
prompt you to login as an Admin user or (if your current account has
Admin privileges) simply ask you to allow it to make changes. Click
<kbd>Yes</kbd>

1.6 The installer will walk through several options; accept all the
defaults (by repeatedly clicking <kbd>Next</kbd>) and when prompted, click
<kbd>Install</kbd>. The installer will show a progress bar; the process takes
less than one minute; click <kbd>Finish</kbd> when prompted to close the
installer.

1.7 Press Windows+R keys to open the **Run** dialog; type **"RStudio"**
in the text box and hit enter. This will launch a new RStudio window.
The RStudio window is divided into several panes. The lower left pane
shows the **Console** tab and will show some text followed by a command
prompt (\>):

```         
R version ...
Copyright (C) 20XX The R Foundation for Statistical Computing
Platform: ...

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> 
```

1.8 Following the workshop, you can remove R and RStudio. As an Admin
user, go Start \> Settings \> Apps & Features. Click on the program to
remove and click Uninstall.

1.9 Proceed to [Installing required R libraries] below.

## Macintosh setup {#macintosh-setup}

### Installing R/RStudio (Macintosh)

1.1 RStudio depends on the R programming environment, so we have to
install that first. - In a web browser, open:
[https://cran.rstudio.com/bin/macosx](https://cran.rstudio.com/bin/macosx){target="_blank"}.

-   Note that newer Macs will use Silicon build, older Macs (pre 2020)
    will use Intel builds. (You can confirm your architecture under
    About this Mac: Chip; "Apple M" indicates Silicon. )

-   Right-click to download the latest version.

-   Open the downloaded executable to launch the R installer.

1.2 The installer will walk through several options; accept all the
defaults (by repeatedly clicking <kbd>Continue</kbd>) and when prompted, click
<kbd>Install</kbd>. The installer will prompt you to confirm your
username/password. The installer will show a progress bar; the process
takes about 1 minutes; click <kbd>Finish</kbd> when prompted to close the
installer.

1.3 To install RStudio, in a web-browser, open:

-   [https://rstudio.com/products/rstudio/download/#download](https://rstudio.com/products/rstudio/download/#download){target="_blank"}
    and click on **Download RStudio Desktop for Mac**.

1.4 Opening the downloaded executable opens a window with "RStudio" and
your Applications folder icons. Drag the RStudio into the Applications
folder. (If you see a dialog that claims RStudio already exists, click
<kbd>Keep Both</kbd>.) The installer will prompt you to confirm your
username/password.

1.5 The installer will walk through several options; accept all the
defaults (by repeatedly clicking <kbd>Next</kbd>) and when prompted, click
<kbd>Install</kbd>. The installer will show a progress bar; the process takes
less than one minute.

1.6 When completed, open the Applications folder and double-click on the
RStudio application. You will see a dialog "*RStudio.app is an app
downloaded from Internet. Are you sure you want to open it?*" Click
<kbd>Open</kbd>. This will launch a new RStudio window. The RStudio window is
divided into several panes. The lower left pane shows the <kbd>Console</kbd>
tab and will show some text followed by a command prompt (\>):

```         
R version ...
Copyright (C) 2024 The R Foundation for Statistical Computing
Platform: ...

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

    Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> 
```

1.7 Following the workshop, you can remove R and RStudio. Open your
Applications directory, and drag the R and RStudio application into the
Trash.

1.8 Proceed to [Installing required R libraries] below.

## Installing required R libraries

2.1 The workshop exercises requires the installation of special R
packages. To install them into RStudio:

-   Copy the code block below and paste into the
    RStudio **Console** tab
-   Press <kbd>Enter/Return</kbd> to execute.
-   As the installation progresses, you might see red text flash by and
    that's ok (typically an informative blurb or minor warning that has
    no downstream impact).


```{r install_packages, eval=FALSE}
# =========================================================================
# Intro to R and RStudio: Install and verify required libraries 
# =========================================================================

required_packages = c(
  "here", 
  "sessioninfo", 
  "tidyverse",
  "ggrepel", 
  "RcolorBrewer",
  # These last two enable interactive plots; they are not strictly necessary 
  # for the workshop curriculum - but it might come up in a question. 
  "plotly",
  "htmlwidgets"
)

# -------------------------------------------------------------------------
# Install any missing packages
missing_packages <- setdiff(required_packages, rownames(installed.packages()))
if (length(missing_packages) > 0) {
  if (!requireNamespace("BiocManager", quietly = TRUE)) {
    install.packages("BiocManager", quiet=TRUE)
    requireNamespace("BiocManager", quietly = TRUE)
  }
  BiocManager::install(missing_packages, update=FALSE, ask=FALSE)
}

# -------------------------------------------------------------------------
# Check required packages have been installed
not_installed = setdiff(required_packages, rownames(installed.packages()))
if (length(not_installed) > 0) {
  stop("PROBLEM: could not install some packages(s):", paste(not_installed, collapse=", "), "\n")
}

# -------------------------------------------------------------------------
# Attempt to actually load all required packages
# FYI, this may spool a litany of package loading messages.
cat("Checking installed packages...\n")
invisible(lapply(required_packages, require, character.only = TRUE, quietly=TRUE))
not_loaded = setdiff(required_packages, (.packages()))
if (length(not_loaded) > 0) {
  stop("PROBLEM: could not load some package(s): ", paste(not_loaded, collapse=", "), "\n")
}

# -------------------------------------------------------------------------
# Good to go
cat("OK: Ready for workshop!\n")

```


2.2 Press <kbd>Control-Q</kbd> close RStudio; when prompted to *Save workspace
image...*, click <kbd>Don't Save</kbd>.

*Your workstation is ready for the workshop. Thank you for your patience
and fortitude.*

---